// Generated by CoffeeScript 1.9.3
var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

this.block_hashtag_ = (function() {
  function block_hashtag_() {
    this.run = bind(this.run, this);
    var css;
    if (window.hashtag_counter != null) {
      window.hashtag_counter++;
    } else {
      window.hashtag_counter = 0;
    }
    this.counter = window.hashtag_counter;
    css = "#hashtag_input" + window.hashtag_counter + " {\n	position: absolute;\n	top: 55%;\n	width: 80%;\n	left: 6%;\n	text-align: center;\n	font-size: 11px;\n}";
    $('<style type="text/css"></style>').html(css).appendTo("head");
    $("<div class=\"drag-wrap draggable filter\" name=\"hashtag\">\n	HASHTAG #\n	<input id=\"hashtag_input" + window.hashtag_counter + "\" type=\"text\" value=\"\">\n</div>").appendTo(".drag-zone");
    interact("[name=hashtag]").on('tap click', (function(_this) {
      return function(event) {
        return $("#hashtag_input" + window.hashtag_counter).focus();
      };
    })(this));
  }

  block_hashtag_.prototype.run = function(element) {
    var cur_tag, i, len, lower_tags, tag, tags;
    tags = element.tags;
    tag = $("#hashtag_input" + this.counter).val().toLowerCase();
    lower_tags = tags.map(function(string) {
      return string.toLowerCase();
    });
    for (i = 0, len = lower_tags.length; i < len; i++) {
      cur_tag = lower_tags[i];
      if (cur_tag.indexOf(tag) !== -1) {
        console.log(tag + " is in #" + cur_tag);
        return true;
      }
    }
    return false;
  };

  return block_hashtag_;

})();
